{{- /* 自定义CSS以移除图标下划线 */ -}}
<style>
/* 移除导航栏和社交媒体图标的下划线 */
.menu a.search-toggle,
.menu a.search-clear,
.menu a.theme-switch,
.menu a.language,
.links a {
    text-decoration: none !important;
    border-bottom: none !important;
}

/* 移动端菜单中的图标 */
#header-mobile .menu a.theme-switch,
#header-mobile .menu a.language,
#header-mobile .menu a.search-toggle,
#header-mobile .menu a.search-clear {
    text-decoration: none !important;
    border-bottom: none !important;
}
</style>
{{- /* Desktop header */ -}}
<header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="{{ .Site.Home.RelPermalink }}" title="{{ .Site.Title }}">{{ .Site.Title }}</a>
        </div>
        <div class="menu">
            <div class="menu-inner">
                {{- range .Site.Menus.main -}}
                    {{- $url := .URL | relLangURL -}}
                    {{- with .Page -}}
                        {{- $url = .RelPermalink -}}
                    {{- end -}}
                    <a class="menu-item{{ if $.IsMenuCurrent `main` . | or ($.HasMenuCurrent `main` .) | or (eq $.RelPermalink $url) }} active{{ end }}" href="{{ $url }}"{{ with .Title }} title="{{ . }}"{{ end }}{{ if (urls.Parse $url).Host }} rel="noopener noreffer" target="_blank"{{ end }}>
                        {{- .Pre | safeHTML }} {{ .Name }} {{ .Post | safeHTML -}}
                    </a>
                {{- end -}}
                {{- if .Site.Menus.main -}}
                    <span class="menu-item delimiter"></span>
                {{- end -}}
                <!-- 语言切换菜单 -->
                {{- if hugo.IsMultilingual -}}
                    <a href="javascript:void(0);" class="menu-item language" title="{{ T `selectLanguage` }}">
                        <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;">
                            {{- range .Site.Home.AllTranslations -}}
                                <option value="{{ .Permalink }}"{{ if eq .Language $.Site.Language }} selected{{ end }}>
                                    {{- .Language.LanguageName -}}
                                </option>
                            {{- end -}}
                        </select>
                    </a>
                {{- end -}}
                <a href="javascript:void(0);" class="menu-item theme-switch" title="{{ T "switchTheme" }}">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header>

{{- /* Mobile header */ -}}
<header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="{{ .Site.Home.RelPermalink }}" title="{{ .Site.Title }}">{{ .Site.Title }}</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile">
            {{- range .Site.Menus.main -}}
                {{- $url := .URL | relLangURL -}}
                {{- with .Page -}}
                    {{- $url = .RelPermalink -}}
                {{- end -}}
                <a class="menu-item" href="{{ $url }}" title="{{ .Title }}"{{ if (urls.Parse $url).Host }} rel="noopener noreffer" target="_blank"{{ end }}>
                    {{- .Pre | safeHTML }}{{ .Name }}{{ .Post | safeHTML -}}
                </a>
            {{- end -}}
            <!-- 移动端语言切换菜单 -->
            {{- if hugo.IsMultilingual -}}
                <a class="menu-item language" title="{{ T `selectLanguage` }}">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;">
                        {{- range .Site.Home.AllTranslations -}}
                            <option value="{{ .Permalink }}"{{ if eq .Language $.Site.Language }} selected{{ end }}>
                                {{- .Language.LanguageName -}}
                            </option>
                        {{- end -}}
                    </select>
                </a>
            {{- end -}}
            <a href="javascript:void(0);" class="menu-item theme-switch" title="{{ T "switchTheme" }}">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
        </div>
    </div>
</header>
